<html>
    <head>
        <link rel="stylesheet" type="text/css" href="/public/css/lobby.css">
        <link rel="stylesheet" type="text/css" href="/public/css/main.css">
        <script type="text/javascript" src="/public/scripts/render_lobby.js"></script>
    </head>
    <body>
        <div id="lobby">
            <div id="players"></div>
            <div id="shareLink"></div>
            <div id="startGame"></div>
        </div>

        <div id="prelobby">
            <form id="pseudo">
                <input type="text" value="Choose your pseudo!" id="pseudonyme"/>
                <input type="submit" value="Submit!"/>
            </form>
            <script>
                var form = document.getElementById('pseudo');
                form.addEventListener('submit', function(e) {
                    window.sessionStorage.pseudo = document.getElementById('pseudonyme').value;
                    document.location.reload(true);
                });
            </script>
        </div>

        <script>
            var form = document.getElementById('pseudo');
            var lobby = document.getElementById('lobby');

            if (!window.sessionStorage.pseudo) {
                lobby.style.display = "none";
                form.style.display = "block";
            } else {
                lobby.style.display = "block";
                form.style.display = "none";
            }
        </script>


        <script src="http://localhost:8080/socket.io/socket.io.js"></script>
        <script>
            const players = [];
            const link = window.location.href;
            if (window.sessionStorage.pseudo) {
                const socket = io();
            }
            renderLobby(players, link);
        </script>
    </body>
</html>